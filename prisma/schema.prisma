generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// TODO: Add Organization model & Update User model to have organizationId
model User {
  id          String         @id @default(uuid())
  clerkUserId String         @unique
  email       String         @unique
  name        String?
  transactions Transaction[]
}

model Transaction {
  id               Int      @id @default(autoincrement())
  name             String
  location         String
  askingPrice      Float
  transactionOwner String
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  user             User     @relation(fields: [userId], references: [id])
  userId           String
  files            File[]
}

model File {
  id               Int      @id @default(autoincrement())
  url              String
  embeddings       Json
  transaction      Transaction @relation(fields: [transactionId], references: [id])
  transactionId    Int
  aiExtractedInfo  AIExtractedInfo[]
}

model AIExtractedInfo {
  id                        Int      @id @default(autoincrement())
  aiModel                   String?
  streetWithHouseNumber     String?
  cityWithPostalCode        String?
  agentBroker               String?
  owner                     String?
  parcelNumber              String?
  propertyArea              Float?
  buildingVolume            Float?
  buildingInsuranceValue    Float?
  yearOfConstruction        Int?
  lastMajorRenovation       Int?
  numberOfRentalUnits       Int?
  heatingSystem             String?
  formOfOwnership           String?
  dealStructure             String?
  vacancyPerAnnum           Float?
  actualNetRentalIncomePa   Float?
  propertyExpensesPa        Float?
  askingSalePrice           Float?
  file                      File     @relation(fields: [fileId], references: [id])
  fileId                    Int
}